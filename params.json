{"name":"魔豆路由器 API","tagline":"API for Modou Router","body":"# 魔豆路由器 Web Services API 规格文档\r\n\r\n## 基本说明\r\n\r\n- 系统操作处于锁的状态下返回 code=－1\r\n- 身份鉴权基于 cookies\r\n- 未登录状态下访问需要 auth 的 API 返回 403 状态码\r\n- 单位：流量的单位（kbps），磁盘容量单位（MB），时间单位（s）\r\n- 所有 POST 的请求的返回值的格式都为 JSON\r\n\r\n基础返回格式：\r\n\r\n```\r\n{\r\n  \"code\":number,         // 返回代码，0为成功，其他失败\r\n  \"msg\":string             // 可能存在的出错消息\r\n}\r\n```\r\n\r\n## 登录\r\n\r\n* /api/auth/login\r\n\r\n post 需要登录验证：否\r\n\r\n```\r\n{\r\n  \"password\":string\r\n}\r\n```\r\n\r\n## 版本升级\r\n\r\n### 获取当前版本信息\r\n\r\n* api/system/get_version_info\r\n  \r\nget 不需要auth\r\n\r\nreturn\r\n\r\n```\r\n{\r\n  \"version1\": \"1.0.5 Build 130608\",  // 当前软件版本\r\n  \"version2\": \"WR841N 10.0\"          // 当前硬件版本\r\n}\r\n```\r\n\r\n### 检查是否有新版本\r\n\r\n* api/system/check_remote_version_upgrade\r\n  \r\n  get\r\n\r\n  return\r\n\r\n```\r\n{\r\n  \"code\": 0, // 0->有新版本，3->read json faild, 4->已经是最新版\r\n  \"msg\": \"\",\r\n  \"\t\": [0-9]*,\r\n  \"filename\": ***.bin,\r\n  \"version\": ****, \r\n  \"releasenote\": \"release note\"\r\n}\r\n```\r\n\r\n\r\n### 下载新固件\r\n\r\n* api/system/download_version_upgrade\r\n  get\r\n\r\n  return\r\n\r\n```\r\n{\r\n  \"code\": 0,\r\n  \"msg\": \"\",\r\n}\r\n```\r\n\r\n### 查看下载进度\r\n\r\n* api/system/check_download_progress(jsondata)\r\n\r\n  post  jsondata[filename]\r\n  \t\t\tjsondata[filesize]\r\n\r\n  return\r\n\r\n```\r\n{\r\n  \"code\": 0|1|2,        // (0 -> success, 1-> running ,2->没有mount /data, 3->读取latestversion失败 4-> 解析json失败 5->存储空间不足 6-> 下载失败 7->md5校验失败 8->link创建失败 9->自动升级正在下载 10->正在升级中不能下载 11->更名失效)\r\n  \"msg\": \"\",\r\n  \"percent\": \"xx\",\r\n  \"stage\": 0        // (0->pre check, 1-> download, 2->post check)\r\n}\r\n```\r\n\r\n### 取消下载\r\n\r\n* api/system/cancel_download\r\n\r\n  get\r\n\r\n  return\r\n\r\n```\r\n{\r\n  \"code\": 0|1,\r\n  \"msg\": \"\"\r\n}\r\n```\r\n\r\n\r\n### 进行版本升级\r\n\r\n* api/system/upgrade_version\r\n\r\n  get\r\n\r\n  return\r\n\r\n```\r\n{\r\n  \"code\": 0,  // 0|1(0,成功；１,失败)\r\n  \"msg\": \"\" // \r\n}\r\n```\r\n\r\n### 获取当前升级百分比\r\n  \r\n* api/system/check_upgrade_progress\r\n\r\n  get\r\n  \r\n  return\r\n\r\n```\r\n{\r\n\"code\": 0|1|2,          //(0-> success,\r\n                                        2->faild, upgraded nothing, Error\r\n                                        3->faild, upgraded safe only, Error\r\n                                        4->faild, upgraded vm only, Error\r\n                                        5->faild, upgraded sys only, Error\r\n                                        6->faild, upgraded safe and vm, Error\r\n                                        7->faild, upgraded safe and sys, Error\r\n                                        8->faild. 自动下载正在进行\r\n    9->faild, 数字签名出错\r\n                                        -1->progress)\r\n\"percent\": 10           // number 表示升级进度10% (0-100)\r\n\"msg\":\"xx\",\r\n\"stage\": 0               // (0->uboot, 1->check image, 2->safe, 3->vm, 4->sys, 5->sys check, -1->wait)\r\n}\r\n```\r\n\r\n\r\n## 重启\r\n\r\n### 正常重启\r\n\r\n* api/system/reboot\r\n\r\n  get\r\n\r\n  return\r\n  <pre>\r\n    {\r\n      \"code\": 0,\r\n      \"msg\": \"\"\r\n    }\r\n  </pre>\r\n\r\n### 重启进安全模式\r\n\r\n* api/system/safe_reboot\r\n\r\n  get\r\n\r\n  return\r\n  <pre>\r\n    {\r\n      \"code\": 0,\r\n      \"msg\": \"\"\r\n    }\r\n  </pre>\r\n\r\n  \r\n### 恢复出厂设置\r\n\r\n*api/system/reset_config\r\nget  需要auth \r\n\r\n\r\n## 背光控制 \r\n\r\n### 锁定背光，保持常亮\r\n\r\n*api/system/lock_backlight\r\n \r\n### 解锁背光，停止保持\r\n\r\n*api/system/release_backlight\r\n\r\n### 唤醒背光\r\n\r\n*api/system/wakeup_backlight\r\n\r\n## 防蹭网\r\n\r\n* api/security/get_config\r\n\r\nmethod: get\r\nreturn \r\n\r\n```\r\n{\r\n  “code”: 0,\r\n   “enabled”:true             (type: boolean)        // 防蹭网是否开启\r\n}\r\n```\r\n\r\n* api/security/set_config\r\n\r\nmethod: post\r\npost data\r\n\r\n```\r\n{\r\n  “enabled”: true            (type:boolean)   // 是否开启防蹭网\r\n}\r\n```\r\n\r\npost 需要登录验证：否\r\n\r\n* api/security/request_permission         // 请求上网权限\r\n\r\nmethod: post\r\npost data:\r\n\r\n```\r\n{\r\n  “username”: “aaa”    (type:string)    // 用户名字\r\n}\r\n```\r\n\r\npost 需要登录验证：否\r\n\r\n* api/security/check_permission      // 检查上网权限\r\nmethod: get\r\n\r\nreturn : \r\n\r\n```\r\n{\r\n  “code”: 0,                  （type:number）         // 0 -> 允许上网，1->不允许上网,2->等待主人处理 -1 ->系统内部错误\r\n}\r\n```\r\n\r\n## WAN 口设置\r\n\r\n### 获取当前 WAN 口设置\r\n\r\n* api/wan/get_info\r\n\r\n get 需要登录验证：是\r\n\r\n```\r\n{\r\n  \"type\":\"STATIC\", // 当前连接方式( DHCP, PPPOE, STATIC, wireless-repeater)\r\n  \"ip\":\"192.168.1.12\",\r\n  \"mask\":\"182.168.1.1\",\r\n  \"gateway\":\"255.255.255.0\",\r\n  \"dns1\":\"8.8.8.8\",\r\n  \"dns2\":\"8.8.4.4\",\r\n  \"mtu\":2,\r\n  \"stp\": true,\r\n  \"account\":\"account\",    // 如果当前是PPPOE\r\n  \"password\":\"password\",   // 如果当前是PPPOE\r\n \"macCloneEnabled\":true, //是否开启Macclone\r\n \"macCloneMac\":\"40:6c:8f:2d:6c:3b\" ,//MAC CLONE mac\r\n\"uptime\":\"22486\" 路由器运行时间\r\n}\r\n```\r\n\r\n### 获取客户端 MAC 地址\r\n\r\n* /api/wan/clientmacaddr\r\n   获取client macaddr,专门给mac clone feature 使用 \r\n   {\"macaddr\":\"40:6C:8F:2D:6C:3A\"}\r\n\r\n### 获取dhcp设置\r\n\r\n* api/wan/get_info/dhcp\r\n\r\n get 需要登录验证：是\r\n\r\n```\r\n{\r\n  \"dns1\":\"8.8.8.8\",\r\n  \"dns2\":\"8.8.4.4\",\r\n  \"mtu\":2,\r\n  \"stp\": true\r\n}\r\n```\r\n\r\n### 获取 PPPoE 设置\r\n\r\n* api/wan/get_info/pppoe\r\n\r\n get 需要登录验证：是\r\n\r\n```\r\n{\r\n  \"account\":\"account\",  \r\n  \"password\":\"password\",\r\n  \"pppoe_method\": \"KeepAlive\" // 连接模式(KeepAlive, OnDemand, Manual)\r\n  \"pedial_period\": 60         // 连接断开xx秒后尝试重拨,单位(秒) 当前KeepAlive\r\n  \"idle_time\": 5              // 无流量时xx分钟后断开,单位(分) 当前OnDemand\r\n  \"status\": -1/0/1/2/3/4/5/6/7// -1: PPPoE暂时无状态；\r\n                              // 0: 连接已成功；\r\n                              // 1: 用户名／密码错误；\r\n                              // 2: 连接已断开; \r\n                              // 3: 不允许本帐户在此时间登录; \r\n                              // 4: 帐户已禁用;\r\n                              // 5: 密码已过期;\r\n                              // 6: 帐户没有远程访问权限;\r\n                              // 7: 未知错误.\r\n}\r\n```\r\n\r\n### 获取静态 IP 设置\r\n\r\n* api/wan/get_info/static\r\n\r\n get 需要登录验证：是\r\n\r\n```\r\n{\r\n  \"ip\":\"192.168.1.12\",\r\n  \"mask\":\"182.168.1.1\",\r\n  \"gateway\":\"255.255.255.0\",\r\n  \"dns1\":\"8.8.8.8\",\r\n  \"dns2\":\"8.8.4.4\",\r\n  \"mtu\":2,\r\n  \"stp\": true\r\n}\r\n```\r\n\r\n### 设置 WAN 口连接方式\r\n\r\n* api/wan/set_config\r\n\r\n  post 需要登录验证：是\r\n  \r\n```\r\n{\r\n  \"type\":\"STATIC\", // 当前连接方式( DHCP, PPPOE, STATIC, wireless-repeater)\r\n  \"ip\":\"192.168.1.12\",\r\n  \"mask\":\"255.255.255.0\",\r\n  \"gateway\":\"192.168.1.1\",\r\n  \"dns1\":\"8.8.8.8\",\r\n  \"dns2\":\"8.8.4.4\",\r\n  \"mtu\":2,\r\n  \"stp\": true,\r\n  \"account\":\"account\",    // 如果当前是PPPOE\r\n  \"password\":\"password\"   // 如果当前是PPPOE\r\n  \"pppoe_method\": \"KeepAlive\" // 连接模式(KeepAlive, OnDemand, Manual)\r\n  \"pedial_period\": 60         // 连接断开xx秒后尝试重拨,单位(秒) 当前KeepAlive\r\n  \"idle_time\": 5              // 无流量时xx分钟后断开,单位(分) 当前OnDemand\r\n \"macCloneEnabled\":true, //是否开启Macclone\r\n  \"macCloneMac\":\"40:6c:8f:2d:6c:3b\" //MAC CLONE mac\r\n}\r\nreturn\r\n{\r\n“code”: 0,          // (0->设置成功，1-> 正在设置，-1 ->已有全局设置锁)\r\n“msg”: “xx”\r\n}\r\n```\r\n\r\n### 检测互联网连通状态\r\n\r\n* api/wan/is_internet_available\r\n\r\n get : 需要登录验证：是\r\n\r\n```\r\n{\r\n  \"code\":0                // 取得外网是否正常可用(0->网通， 1->（不通）不能解析域名，２->（不通）不能到达网关， -1->等待)\r\n\r\n}\r\n```\r\n\r\n### 获取 WAN 口上下行流量信息\r\n\r\n* api/wan/get_traffics\r\n\r\n  get : 需要登录验证：是\r\n\r\n```\r\n{\r\n  \"up\":number,               // 取得自系统启动以来，上行数据的总量(单位字节）\r\n  \"up_str\":\"number\",             // up 值的字符串形式 例如: \"12345678\"\r\n  \"down\":number              // 取得自系统启动依赖，下行数据的总量（单位字节）\r\n  \"down_str\":\"number\"              //  down 值的字符串形式 例如: \"12345678\"\r\n  \"code\":0, 成功\r\n  \"tx_rate\":0, 发丢包率\r\n  \"rx_dropped\":0, 收丢包\r\n\r\n  \"rx_packets\":270649, 收包\r\n  \"tx_packets\":282499, 发包\r\n  \"rx_rate\":0, 收丢包率\r\n  \"tx_dropped\":0 发丢包\r\n\r\n}\r\n```\r\n\r\n## WiFi 设置\r\n\r\n### 取得 WiFi 的配置信息\r\n\r\n* api/wifi/get_config \r\n\r\n  get 需要登录验证:是\r\n  \r\n```\r\n{\r\n  \"2g\": {\r\n    \"enabled\":true,                                     // 2.4g开关    RadioOff\r\n    \"ssid\": \"ssid1\",                                    // 名称 SSID1(长度1-32字符)\r\n    “broadcastssid”:true,                                    // 是否广播SSID\r\n    \"security_mode\": \"WPAPSKWPA2PSK\"      // Security Mode\r\n     \"encrypt\": \"TKIP\",                          // WPA Algorithms(TKIP,AES ,TKIPAES)  EncrypType\r\n    \"password\": \"123456kskdajksdasdasdasdasdasdasda\",   // 密码   AuthMode（长度8-64字符）\r\n    \"power\": 20,                                        // 无线信号功率\tTXPower\r\n    \"channel\": 6,                                       // 信道                         Channel\r\n    \"net_type\": 9,       (0,1,4,6,9,)                          // 网络模式              WirelessMode\r\n    \"band_width_mode\":1,           (0|1)// 频道带宽         HT_BW\r\n    \"mac\":\"28-2c-b2-97-82-39\",                          // mac地址        命令行ifconfig\r\n    \"beacon\": 40,                    (20~1024)                    // Beacon时槽       BeaconPeriod\r\n    \"apsd_enabled\": true,                                       // APSD开关\t      APSDCapable\r\n    \"ap_enabled\":true,                                          // AP隔离开关\t      NoForwarding\r\n    \"shortgi_enabled\": true,                                    // short GI开关    HT_GI\r\n    \"wmm_enabled\": true                                         // 多媒体优先WMM开关            WmmCapable\r\n  },\r\n  \"5g\": {\r\n    \"enabled\":true,                                     // 5g开关\r\n    \"ssid\": \"ssid1\",                                    // 名称\r\n    “broadcastssid”:true,                                    // 是否广播SSID\r\n    \"security_mode\": \"WPAPSKWPA2PSK\"                    // Security Mode\r\n     \"encrypt\": \"TKIP\",                                 // WPA Algorithms(TKIP,AES ,TKIPAES)\t\t\t\t\tEncrypType\r\n    \"password\": \"123456kskdajksdasdasdasdasdasdasda\",   // 密码\r\n    \"power\": 20,                                        // 无线信号功率\r\n    \"channel\": 14,                                      // 信道\r\n    \"net_type\": 14           (2,8,14,15)                     // 网络模式\r\n    \"band_width_mode\":1       (0|1)            // 频道带宽\r\n    \"mac\":\"28-2c-b2-97-82-39\",                          // mac地址\r\n    \"beacon\": 40,                                       // Beacon时槽\r\n    \"apsd_enabled\": true,                                       // APSD开关\r\n    \"ap_enabled\":true,                                          // AP隔离开关\r\n    \"shortgi_enabled\": true,                                    // short GI开关\r\n    \"wmm_enabled\": true                                         // 多媒体优先WMM开关\r\n    “same_as_2g”: true                                       // 使用与2.4g相同的设置（包含：无线名称，加密方式，加密算法，密码，传输功率，Beacon时槽，APSD，AP隔离，Short GI，多媒体优先WMM，无线广播）\r\n  }\r\n}\r\n```\r\n\r\n### 设置 WiFi（非阻塞）\r\n\r\n* api/wifi/set_config\r\n  \r\n  post 需要登录验证：否\r\n\r\n```\r\n{\r\n  \"2g\": {\r\n    \"enabled\":true,                    (true|false)          // 2.4g开关\r\n    \"ssid\": \"ssid1\",                    (any string)        // 名称(长度1-32字符)\r\n    “broadcastssid”:true,                                    // 是否广播SSID\r\n    \"security_mode\": \"Disable\" (Disable,WPAPSK,WPA2PSK,WPAPSKWPA2PSK) //Security Mode\r\n     \"encrypt\": \"TKIP\",   (NONE<>Disable,   TKIP<>WPA(2)PSK,    AES<>WPA(2)PSK ,   TKIPAES<>WPA(2)PSK  )  // WPA Algorithms EncrypType\r\n    \"password\": \"123456kskdajksdasdasdasdasdasdasda\",  (any string)   // 密码(长度8-64字符)\r\n    \"power\": 20,           (100,90,60,30,15,0)            // 无线信号功率\r\n   \"channel\": 0,           (0)            // 哪个信道\r\n      //\r\n                {'name': '自动选择', 'value': 0},\r\n    {'name': '2412MHz (Channel 1)', 'value': 1},\r\n    {'name': '2417MHz (Channel 2)', 'value': 2},\r\n    {'name': '2422MHz (Channel 3)', 'value': 3},\r\n    {'name': '2427MHz (Channel 4)', 'value': 4},\r\n    {'name': '2432MHz (Channel 5)', 'value': 5},\r\n    {'name': '2437MHz (Channel 6)', 'value': 6},\r\n    {'name': '2442MHz (Channel 7)', 'value': 7},\r\n    {'name': '2447MHz (Channel 8)', 'value': 8},\r\n    {'name': '2452MHz (Channel 9)', 'value': 9},\r\n    {'name': '2457MHz (Channel 10)', 'value': 10},\r\n    {'name': '2462MHz (Channel 11)', 'value': 11},\r\n    {'name': '2467MHz (Channel 12)', 'value': 12},\r\n    {'name': '2472MHz (Channel 13)', 'value': 13}\r\n \r\n  \"net_type\": 9,        (0,1,4,6,9,)                     // 网络模式\r\n2G: 9\r\n0: legacy 11b/g mixed\r\n1: legacy 11B only\r\n4: legacy 11G only\r\n6: 11N only\r\n9: 11BGN mixed\r\n\r\n    \"band_width_mode\":1,      (0|1|2)                 // 频道带宽(20Mhz->0, 20Mhz/40Mhz->1,强制40Mhz->2)\r\n    \"beacon\": 40,                       (20~1024)        // Beacon时槽\r\n    \"apsd_enabled\": true,                         (true|flase)      // APSD开关\r\n    \"ap_enabled\":true,                              (true|flase)     // AP隔离开关\r\n    \"shortgi_enabled\": true,                       (true|flase)      // short GI开关\r\n    \"wmm_enabled\": true                          (true|flase)        // 多媒体优先WMM开关\r\n  },\r\n  \"5g\": {\r\n    \"enabled\":true,                              // 5g开关\r\n    \"ssid\": \"ssid1\",                              // 名称(长度1-32字符)\r\n    “broadcastssid”:true,                    // 是否广播SSID\r\n    \"security_mode\": \"Disable\"    // Security Mode(Disable,WPAPSK,WPA2PSK,WPAPSKWPA2PSK)\r\n     \"encrypt\": \"TKIP\",    (NONE<>Disable,   TKIP<>WPA(2)PSK,    AES<>WPA(2)PSK ,   TKIPAES<>WPA(2)PSK  )   // WPA Algorithms(TKIP,AES ,TKIPAES)\r\n    \"password\": \"123456kskdajksdasdasdasdasdasdasda\",    // 密码(长度8-64字符)\r\n    \"power\": 20,      (100,90,60,30,15,0)        // 无线信号功率\r\n    \"channel\": 0,                          // 哪个信道\r\n //\r\n      {'name': '自动选择', 'value': 0},\r\n    {'name': '5180MHz (Channel 36)', 'value': 36},\r\n    {'name': '5200MHz (Channel 40)', 'value': 40},\r\n    {'name': '5220MHz (Channel 44)', 'value': 44},\r\n    {'name': '5240MHz (Channel 48)', 'value': 48},\r\n    {'name': '5260MHz (Channel 52)', 'value': 52},\r\n    {'name': '5280MHz (Channel 56)', 'value': 56},\r\n    {'name': '5300MHz (Channel 60)', 'value': 60},\r\n    {'name': '5320MHz (Channel 64)', 'value': 64},\r\n    {'name': '5745MHz (Channel 149)', 'value': 149},\r\n    {'name': '5765MHz (Channel 153)', 'value': 153},\r\n    {'name': '5785MHz (Channel 157)', 'value': 157},\r\n    {'name': '5805MHz (Channel 161)', 'value': 161},\r\n    {'name': '5825MHz (Channel 165)', 'value': 165}\r\n    \r\n\r\n    \"net_type\": 14,                (2,8,14,15)         // 网络模式\r\n5G 14\r\n2: legacy 11A only\r\n8: 11AN mixed\r\n14: 11A/AN/AC mixed 5G band only\r\n15: 11 AN/AC mixed 5G band only\r\n\r\n    \"band_width_mode\":1       (0|1) ,                   // 频道带宽\r\n    \"beacon\": 40,                               // Beacon时槽\r\n    \"apsd_enabled\": true,                               // APSD开关\r\n    \"ap_enabled\":true,                                  // AP隔离开关\r\n    \"shortgi_enabled\": true,                            // short GI开关\r\n    \"wmm_enabled\": true                                 // 多媒体优先WMM开关\r\n “same_as_2g”: true                                       // 使用与2.4g相同的设置（包含：无线名称，加密方式，加密算法，密码，传输功率，Beacon时槽，APSD，AP隔离，Short GI，多媒体优先WMM，无线广播）\r\n  }\r\n}\r\n```\r\n\r\n* api/wifi/check_set\r\n\r\ngett  需要登录验证：是\r\nreturn\r\n\r\n```\r\n{\r\n“code”: 0,          // (0->设置成功，1-> 正在设置，-1 ->已有全局设置锁)\r\n“msg”: “xx”\r\n}\r\n```\r\n\r\n### 无线网络是否已打开\r\n\r\n* api/wifi/is_enabled\r\n\r\n  get  需要登录验证：是\r\n\r\n```\r\n{\r\n  \"is_enabled\":bool,              // 是否已经打开了wifi\r\n}\r\n```\r\n\r\n* api/wifi/ssid_get_config  (TODO)\r\n  \r\n  get 需要登录验证：是\r\n  return \r\n \r\n```\r\n[\r\n  {\r\n    \"enable\": true,                                       // 是否启用\r\n    \"name\": \"ssid1\",                                      // 名称\r\n    \"encrypt\": \"WAP/WAP2\",                               // 无线加密方式\r\n    \"password\": \"123456kskdajksdasdasdasdasdasdasda\",    // 密码\r\n    \"rate\": \"5G\",                                        // 无线频段\r\n    \"double_security\": true                              // 是否开启双重安全认证\r\n  },\r\n  {\r\n    \"enable\": false,\r\n    \"name\": \"ssid2idsijdoajosjdaojsijdao\",\r\n    \"encrypt\": \"不加密\",\r\n    \"password\": \"\",\r\n    \"rate\": \"2.4G\",\r\n    \"double_security\": false\r\n  }\r\n]\r\n```\r\n\r\n* api/wifi/ssid_set_config   (TODO)\r\n  \r\n  post 需要登录验证：是\r\n\r\n```\r\n[\r\n  {\r\n    \"enable\": true,                                       // 是否启用\r\n    \"name\": \"ssid1\",                                      // 名称\r\n    \"encrypt\": \"WAP/WAP2\",                               // 无线加密方式\r\n    \"password\": \"123456kskdajksdasdasdasdasdasdasda\",    // 密码\r\n    \"rate\": \"5G\",                                        // 无线频段\r\n    \"double_security\": true                              // 是否开启双重安全认证\r\n  },\r\n  {\r\n    \"enable\": false,\r\n    \"name\": \"ssid2idsijdoajosjdaojsijdao\",\r\n    \"encrypt\": \"不加密\",\r\n    \"password\": \"\",\r\n    \"rate\": \"2.4G\",\r\n    \"double_security\": false\r\n  }\r\n]\r\n```\r\n\r\n## LAN 口\r\n\r\n### 获取 LAN 口设置\r\n\r\n* api/lan/get_lan_config\r\n\r\n  get 需要登录验证：是\r\n\r\n```\r\n{\r\n  \"ip\": \"192.168.1.2\",                        // ip\r\n  \"net_mask\": \"255.255.255.0\",                // 子网掩码\r\n  \"dhcp_enabled\": true,                       // dhcp开关\r\n  \"ipaddr_start\": \"4.4.4.4\",                  // IP地址开始段\r\n  \"ipaddr_end\": \"4.4.4.4\",                    // IP地址结束段\r\n  \"gateway\": \"192.168.1.0\",                   // 网关\r\n  \"dhcp_net_mask\": \"255.255.255.0\",           // dhcp子网掩码\r\n  \"dns1Method\": \"手动\",                       // dns1设置方式（手动，自动）\r\n  \"dns2Method\": \"自动\",                        // dns2设置方式（手动，自动）\r\n  \"dns1\": \"8.8.8.8\",                          // 首选dns\r\n  \"dns2\": \"\",                                 // 备用dns\r\n  \"time\": 381,                                // 地址租期\r\n  \"mac\":\"28-2c-b2-97-82-39\"                   // mac地址\r\n}\r\n```\r\n\r\n### 修改 LAN 口设置\r\n\r\n* api/lan/set_lan_config\r\n\r\n  post 需要登录验证：是\r\n\r\n```\r\n{\r\n  \"ip\": \"192.168.1.2\",                        // ip\r\n  \"net_mask\": \"255.255.255.0\",                // 子网掩码\r\n  \"dhcp_enabled\": true,                       // dhcp开关\r\n  \"ipaddr_start\": \"4.4.4.4\",                  // IP地址开始段\r\n  \"ipaddr_end\": \"4.4.4.4\",                    // IP地址结束段\r\n  \"gateway\": \"192.168.1.0\",                   // 网关\r\n  \"dhcp_net_mask\": \"255.255.255.0\",           // dhcp子网掩码\r\n  \"dns1Method\": \"手动\",                       // dns1设置方式（手动，自动）\r\n  \"dns2Method\": \"自动\",                       // dns2设置方式（手动，自动）\r\n  \"dns1\": \"8.8.8.8\",                          // 首选dns\r\n  \"dns2\": \"\",                                 // 备用dns\r\n  \"time\": 381,                                // 地址租期\r\n  \"mac\":\"28-2c-b2-97-82-39\"                   // mac地址\r\n}\r\n```\r\n\r\n* api/lan/check_set\r\n\r\ngett  需要登录验证：是\r\nreturn\r\n\r\n```\r\n{\r\n“code”: 0,          // (0->设置成功，1-> 正在设置，2-> 设置失败)\r\n“msg”: “xx”\r\n}\r\n```\r\n\r\n### 获取物理连接情况\r\n\r\n* api/system/get_cable_connection\r\n\r\n get 需要登录验证:是\r\n<pre>\r\n{\r\n  \"wan\":true   // wan口是否有物理连接\r\n  \"lan1\":true   // wan口是否有物理连接\r\n  “lan2\":true   // wan口是否有物理连接\r\n  “usb”:true   // usb是否有连接\r\n}\r\n</pre>\r\n\r\n### 获取系统时间\r\n\r\n*api/system/get_time  \r\nget 需要登录验证:是\r\n\r\nreturn json \r\n\r\n```\r\n{\r\n  “time”: 2361632818231,       //路由器时间（单位秒）\r\n  “time_type”: 0|1   (type:number)                 //时间格式，0->12小时制式,1->24小时制式\r\n}\r\n```\r\n\r\n### 设置系统时间\r\n\r\n*api/system/set_time\r\n\r\npost  需要登录验证:是\r\n\r\npost data:\r\n\r\n```\r\n{\r\n “time_type”: 0|1   (type:number)                 //时间格式，0->12小时制式,1->24小时制式\r\n}\r\n```\r\n\r\n## 外联设备\r\n\r\n### 硬盘设备信息\r\n\r\n* api/devices/disk\r\n\r\n  get\r\n  \r\nreturn:\r\n\r\n```\r\n{\r\n  \"totalSize\": 1,             // 总大小(KB)\r\n  \"left\": 0.23,               // 剩余空间(KB)\r\n  \"name\": \"disk1\",            // 硬盘的名字\r\n  \"time\": 5677                // 连接时间\r\n}\r\n```\r\n\r\n### 卸载硬盘\r\n\r\n* api/devices/disk_uninstall\r\n  \r\nget\r\n\r\nreturn\r\n\r\n```\r\n{\r\n  \"code\": 0,\r\n  \"msg\": \"\"\r\n}\r\n```\r\n\r\n### 获取内存和闪存信息\r\n\r\n* api/devices/ddr2_flash\r\n\r\nmethod:get\r\n\r\nreturn:\r\n\r\n```\r\n{\r\n  \"ddr2_total_size\": 64,            //ddr2总大小（KB）\r\n  \"ddr2_remain\": 28,              // ddr2剩余（KB）\r\n  \"flash_total_size\": 64,                           // flash总大小（KB）\r\n  \"flash_remain\": 28,                             // flash剩余（KB）\r\n}\r\n```\r\n\r\n### 获取有线设备列表\r\n\r\n* api/devices/cables\r\n\r\n  get\r\n  \r\n  return\r\n  <pre>\r\n  {\r\n    \"code\": 0,\r\n    \"devices\": [\r\n        {\r\n            \"platform\": \"phone\",                    // 设备类型(phone, pad, unknow)\r\n            \"total_speed\": 200,                     // 总速率\r\n            \"down_speed\": 100,                      // 下载速度\r\n            \"up_speed\": 100,                        // 上传速度\r\n            \"host_name\": \"android-a078b707872bc9a\", // 主机名\r\n            \"connectType\": \"WIFI5G\",                // 连接类型c\r\n            \"up\": \"10MB\",                           // 总上传\r\n            \"down\": \"10GB\",                         // 总下载\r\n            \"type\": 1,                         // 设备连接方式(1->cable, 2->wifi2.4g,3->wifi5g)\r\n            \"ip\": \"192.168.1.11\",                   // ip地址\r\n            \"mac\": \"97:32:21:44:55:11:42\",          // mac地址\r\n            \"leftTime\": 31223,                      // 租约剩余时间单位(s)\r\n            \"time\": 31223,                          // 连接时间单位(s)\r\n            \"tag\": \"white\"                          // 白名单，黑名单，或没有(white, black, \"\")\r\n            \"up_limit\": 400,                        // 上传限速\r\n            \"down_limit\": 600                       // 下载限速\r\n\t“local”,0 or 1 // web使用,是否是当前主机\r\n        },...  \r\n    ]\r\n}\r\n  </pre>\r\n\r\n\r\n### 获取无线设备列表\r\n\r\n* api/devices/wifis\r\n\r\n  get\r\n  \r\n  return\r\n  <pre>\r\n  {\r\n    \"code\": 0,\r\n    \"devices\": [\r\n        {\r\n            \"platform\": \"phone\",                    // 设备类型(phone, pad, unknow)\r\n            \"total_speed\": 200,                     // 总速率\r\n            \"down_speed\": 100,                      // 下载速度\r\n            \"up_speed\": 100,                        // 上传速度\r\n            \"host_name\": \"android-a078b707872bc9a\", // 主机名\r\n            \"connectType\": \"WIFI5G\",                // 连接类型\r\n            \"up\": \"10MB\",                           // 总上传\r\n            \"down\": \"10GB\",                         // 总下载\r\n            \"type\": 1,                         // 设备连接方式(1->cable, 2->wifi2.4g,3->wifi5g)\r\n            \"ip\": \"192.168.1.11\",                   // ip地址\r\n            \"mac\": \"97:32:21:44:55:11:42\",          // mac地址\r\n            \"leftTime\": 31223,                      // 租约剩余时间单位(s)\r\n            \"time\": 31223,                          // 连接时间单位(s)\r\n            \"tag\": \"white\"                          // 白名单，黑名单，或没有(white, black, \"\")\r\n            \"up_limit\": 400,                        // 上传限速\r\n            \"down_limit\": 600                       // 下载限速\r\n\t“single”： 100                            // 信号强度\r\n“local”,0 or 1 // web使用,是否是当前主机\r\n“rssi0”,-30 //信号强度\r\n“rssi1”,0 //信号强度\r\n\r\n“rssi2”,-50//信号强度\r\n\r\n\r\n        },...\r\n    ]\r\n}\r\n  </pre>\r\n\r\n### 修改设备主机名\r\n\r\n* api/devices/edit_hostname\r\n\r\n  post\r\n  <pre>\r\n  {\r\n    \"mac\": \"97:32:21:44:55:11:42\",\r\n    \"host_name\": \"android-a078b\"\r\n  }\r\n  </pre>\r\n\r\n### 获得黑名单列表\r\n\r\n*/api/devices/blacklist\r\n\r\n```\r\n{\"devices\":[{\r\n            \"platform\": \"phone\",                    // 设备类型(phone, pad, unknow)\r\n            \"host_name\": \"android-a078b707872bc9a\", // 主机名\r\n            \"type\": 1,                         // 设备连接方式(1->cable, 2->wifi2.4g,3->wifi5g)\r\n            \"mac\": \"97:32:21:44:55:11:42\",          // mac地址\r\n\r\n},...],\"code\":0}\r\n```\r\n\r\n### 获得白名单列表\r\n\r\n*/api/devices/whitelist\r\n\r\n```\r\n{\"devices\":[{\r\n            \"platform\": \"phone\",                    // 设备类型(phone, pad, unknow)\r\n            \"host_name\": \"android-a078b707872bc9a\", // 主机名\r\n            \"type\": 1,                         // 设备连接方式(1->cable, 2->wifi2.4g,3->wifi5g)\r\n            \"mac\": \"97:32:21:44:55:11:42\",          // mac地址\r\n\r\n},...],\"code\":0}\r\n```\r\n\r\n### 获得灰名单列表（上网请求设备列表）\r\n\r\n*/api/devices/graylist\r\n\r\n```\r\n{\"devices\":[{\r\n            \"mac”: \"AA:BB:CC:DD:EE:FF\",                    // 请求设备的MAC地址\r\n            \"ip\": \"192.168.10.100\",                                  // IP地址\r\n            \"username\": \"张三丰\",                             // 用户名\r\n\r\n},...],\"code\":0}\r\n```\r\n\r\n### 把设备添加到黑名单\r\n\r\n* api/devices/blacklist_add\r\n\r\n  post\r\n  <pre>\r\n  {\r\n    \"mac\": \"32:21:44:55:11:42\"\r\n  }\r\n  </pre>\r\n\r\n### 从黑名单移除\r\n\r\n* api/devices/blacklist_remove\r\n\r\n  post\r\n  <pre>\r\n  {\r\n    \"mac\": \"32:21:44:55:11:42\"\r\n  }\r\n  </pre>\r\n  \r\n### 添加到白名单\r\n  \r\n* api/devices/whitelist_add\r\n\r\n  post\r\n  <pre>\r\n  {\r\n    \"mac\": \"32:21:44:55:11:42\"\r\n  }\r\n  </pre>\r\n  \r\n### 从白名单移除\r\n\r\n* api/devices/whitelist_remove\r\n\r\n  post\r\n  <pre>\r\n  {\r\n    \"mac\": \"32:21:44:55:11:42\"\r\n  }\r\n  </pre>\r\n\r\n### 应用防火墙规则\r\n\r\n* api/devices/apply_rule\r\n\r\n  post\r\n  <pre>\r\n  {\r\n    \"mac\": \"32:21:44:55:11:42\"\r\n  }\r\n  </pre>\r\n\r\n\r\n## 极客模式相关接口\r\n\r\n/api/system/get_expertMode\r\n需要验证 ：yes\r\n方法        ：get\r\nreturn \r\n<pre>\r\n  {\r\n    \"enabled\": true/false\r\n  }\r\n  </pre>\r\n\r\n/api/system/set_expertMode\r\n需要验证 ：yes\r\n方法        ：post\r\npost data：\r\n<pre>\r\n  {\r\n    \"enabled\": true/false\r\n  }\r\n  </pre>\r\n\r\nreturn data：\r\n<pre>\r\n  {\r\n    “code”: 0,\r\n“msg”: “error message when failed” (optional, when error happens)\r\n“password”: “XXXXXXX”    (optional, when expert mode is enabled)\r\n  }\r\n  </pre>\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}