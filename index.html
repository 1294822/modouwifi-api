<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>魔豆路由器 API by mochui</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>魔豆路由器 API</h1>
        <h2>API for Modou Router</h2>
        <a href="https://github.com/mochui/modouwifi-api" class="button"><small>View project on</small>GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <p>路由器-web-service-api规格文档</p>

<h4>
<a name="%E7%B3%BB%E7%BB%9F%E6%93%8D%E4%BD%9C%E5%A4%84%E4%BA%8E%E9%94%81%E7%9A%84%E7%8A%B6%E6%80%81%E4%B8%8B%E8%BF%94%E5%9B%9Ecode1" class="anchor" href="#%E7%B3%BB%E7%BB%9F%E6%93%8D%E4%BD%9C%E5%A4%84%E4%BA%8E%E9%94%81%E7%9A%84%E7%8A%B6%E6%80%81%E4%B8%8B%E8%BF%94%E5%9B%9Ecode1"><span class="octicon octicon-link"></span></a>系统操作处于锁的状态下返回code=－1</h4>

<h4>
<a name="%E6%9C%AA%E7%99%BB%E5%BD%95%E7%8A%B6%E6%80%81%E4%B8%8B%E8%AE%BF%E9%97%AE%E9%9C%80%E8%A6%81auth%E7%9A%84api%E5%88%99%E8%BF%94%E5%9B%9E-403%E7%8A%B6%E6%80%81%E7%A0%81" class="anchor" href="#%E6%9C%AA%E7%99%BB%E5%BD%95%E7%8A%B6%E6%80%81%E4%B8%8B%E8%AE%BF%E9%97%AE%E9%9C%80%E8%A6%81auth%E7%9A%84api%E5%88%99%E8%BF%94%E5%9B%9E-403%E7%8A%B6%E6%80%81%E7%A0%81"><span class="octicon octicon-link"></span></a>未登录状态下访问需要auth的api则返回 403状态码</h4>

<p>单位：流量的单位（kbps），磁盘容量单位（MB），时间单位（s）</p>

<h4>
<a name="%E6%89%80%E6%9C%89post%E7%9A%84%E8%AF%B7%E6%B1%82%E7%9A%84%E8%BF%94%E5%9B%9E%E5%80%BC%E7%9A%84%E6%A0%BC%E5%BC%8F%E9%83%BD%E4%B8%BAjson%E5%90%8E%E7%BB%AD%E4%B8%8D%E5%86%8D%E5%8D%95%E7%8B%AC%E8%AF%B4%E6%98%8E" class="anchor" href="#%E6%89%80%E6%9C%89post%E7%9A%84%E8%AF%B7%E6%B1%82%E7%9A%84%E8%BF%94%E5%9B%9E%E5%80%BC%E7%9A%84%E6%A0%BC%E5%BC%8F%E9%83%BD%E4%B8%BAjson%E5%90%8E%E7%BB%AD%E4%B8%8D%E5%86%8D%E5%8D%95%E7%8B%AC%E8%AF%B4%E6%98%8E"><span class="octicon octicon-link"></span></a>所有post的请求的返回值的格式都为json,后续不再单独说明</h4>

<pre>
{
  "code":number,         // 返回代码，0为成功，其他失败
  "msg":string             // 可能存在的出错消息
}
</pre>

<h3>
<a name="%E7%99%BB%E5%BD%95%E9%A1%B5" class="anchor" href="#%E7%99%BB%E5%BD%95%E9%A1%B5"><span class="octicon octicon-link"></span></a>登录页</h3>

<ul>
<li>
<p>api/auth/login                // (done)</p>

<p>post 需要登录验证：否</p>

<pre>
{
"password":string
}
</pre>
</li>
<li>
<p>api/auth/get_admin_password_info                  // draft</p>

<p>get 需要登录验证：否</p>

<pre>
{
"default_password":string,           // 默认的密码
"has_set_custom_password":bool       // 是否已经设置了用户自定义的密码
}
</pre>
</li>
<li>
<p>api/auth/get_verify_code_for_admin_password_modifying</p>

<p>get 需要登录验证:否</p>

<pre>
{
"verify_code":string,                // 取得验证码(用于修改web admin密码)
"deadline":number                    // 验证码的有效时间（单位秒）
}
</pre>
</li>
<li>
<p>api/auth/set_password</p>

<p>post 需要登录验证:否</p>

<pre>
{
"new_password":string,         // 新设置的密码
"verify_code":string           // 需要的验证码
}
</pre>
</li>
</ul><p>*api/auth/modify_password  //修改密码
post 需要登录验证
 post json：
{
“old_password”: “xxx”,
“new_password”:”ooo”
}</p>

<pre>
{
code: 0成功设置; 1老密码不符; 2新密码设置失败; 3获取现有密码失败; 4 post的老密码为空; 5 post的新密码为空
msg: “”
}
</pre>

<h3>
<a name="%E7%89%88%E6%9C%AC%E5%8D%87%E7%BA%A7" class="anchor" href="#%E7%89%88%E6%9C%AC%E5%8D%87%E7%BA%A7"><span class="octicon octicon-link"></span></a>版本升级</h3>

<ul>
<li>
<p>api/system/get_version_info  // 获取当前版本信息</p>

<p>get 不需要auth</p>

<p>return</p>

<pre>
  {
    "version1": "1.0.5 Build 130608",  // 当前软件版本
    "version2": "WR841N 10.0"          // 当前硬件版本
  }
</pre>
</li>
<li>
<p>api/system/check_remote_version_upgrade // 检查是否有新版本</p>

<p>get</p>

<p>return</p>

<pre>
  {
    "code": 0, // 0-&gt;有新版本，3-&gt;read json faild, 4-&gt;已经是最新版
    "msg": "",
    " ": [0-9]*,
    "filename": ***.bin,
    "version": ****, 
    "releasenote": "release note<br>release note<br>release note<br>release note<br>release note<br>release note"
  }
</pre>
</li>
<li>
<p>api/system/download_version_upgrade // download 
get</p>

<p>return</p>

<pre>
  {
    "code": 0,
    "msg": "",
  }
</pre>
</li>
<li>
<p>api/system/check_download_progress(jsondata) // download progress</p>

<p>post  jsondata[filename]
          jsondata[filesize]</p>

<p>return</p>

<pre>
  {
    "code": 0|1|2,        // (0 -&gt; success, 1-&gt; running ,2-&gt;没有mount /data, 3-&gt;读取latestversion失败 4-&gt; 解析json失败 5-&gt;存储空间不足 6-&gt; 下载失败 7-&gt;md5校验失败 8-&gt;link创建失败 9-&gt;自动升级正在下载 10-&gt;正在升级中不能下载 11-&gt;更名失效)
    "msg": "",
    "percent": "xx",
    "stage": 0        // (0-&gt;pre check, 1-&gt; download, 2-&gt;post check)
  }
</pre>
</li>
<li>
<p>api/system/cancel_download // cancel downlaod</p>

<p>get</p>

<p>return</p>

<pre>
  {
    "code": 0|1,
    "msg": ""
  }
</pre>
</li>
<li>
<p>api/system/check_local_version_upgrade // 检查当前是否有可升级版本(auto)</p>

<p>get</p>

<p>return</p>

<pre>
  {
    "code": 0,
    "msg": "",
    "version": *****,
    "releasenote": "release note<br>release note<br>release note<br>release note<br>release note<br>release note"
  }
</pre>
</li>
<li>
<p>api/system/upgrade_version // 请求版本升级
get</p>

<p>return</p>

<pre>
  {
    "code": 0,  // 0|1(0,成功；１,失败)
    "msg": "" // 
  }
</pre>
</li>
<li>
<p>api/system/check_upgrade_progress // 获取当前升级百分比</p>

<p>get</p>

<p>return</p>

<pre>
{
"code": 0|1|2,          //(0-&gt; success,
                                        2-&gt;faild, upgraded nothing, Error
                                        3-&gt;faild, upgraded safe only, Error
                                        4-&gt;faild, upgraded vm only, Error
                                        5-&gt;faild, upgraded sys only, Error
                                        6-&gt;faild, upgraded safe and vm, Error
                                        7-&gt;faild, upgraded safe and sys, Error
                                        8-&gt;faild. 自动下载正在进行
    9-&gt;faild, 数字签名出错
                                        -1-&gt;progress)
"percent": 10           // number 表示升级进度10% (0-100)
"msg":"xx",
"stage": 0               // (0-&gt;uboot, 1-&gt;check image, 2-&gt;safe, 3-&gt;vm, 4-&gt;sys, 5-&gt;sys check, -1-&gt;wait)
}
</pre>
</li>
</ul><h3>
<a name="%E9%87%8D%E5%90%AF" class="anchor" href="#%E9%87%8D%E5%90%AF"><span class="octicon octicon-link"></span></a>重启</h3>

<ul>
<li>
<p>api/system/reboot // 正常重启</p>

<p>get</p>

<p>return</p>

<pre>
  {
    "code": 0,
    "msg": ""
  }
</pre>
</li>
<li>
<p>api/system/safe_reboot // 重启进安全模式</p>

<p>get</p>

<p>return</p>

<pre>
  {
    "code": 0,
    "msg": ""
  }
</pre>
</li>
</ul><p>*api/system/reset_config          // 恢复出厂设置
get  需要auth </p>

<p>api/system/get_reset_factory // 获得出厂设置标志
{“reset_code”:1, “code”:0} // reset_code: 1 or 0</p>

<p>api/system/set_reset_factory // 这只出厂设置标志
{“reset_code”:1} // reset_code: 1 or 0</p>

<p>背光控制 
*api/system/lock_backlight //锁定背光，保持常亮</p>

<p>*api/system/release_backlight  //解锁背光，停止保持</p>

<p>*api/system/wakeup_backlight  //唤醒背光</p>

<h3>
<a name="%E5%8F%8C%E9%87%8D%E5%AE%89%E5%85%A8%E8%AE%A4%E8%AF%81" class="anchor" href="#%E5%8F%8C%E9%87%8D%E5%AE%89%E5%85%A8%E8%AE%A4%E8%AF%81"><span class="octicon octicon-link"></span></a>双重安全认证</h3>

<ul>
<li>api/auth/double_security<br>
</li>
</ul><p>get</p>

<pre>
{“code”: 0, “enabled”: true }
</pre>

<ul>
<li>api/auth/double_security</li>
</ul><p>post</p>

<pre>
{ “enabled”: true }
</pre>

<ul>
<li>
<p>api/auth/get_auth_question</p>

<p>get 需要登录验证：是</p>

<pre>
{
"custom": "这是一个自定义问题",   // 用户自定义问题
"question": "当前问题",           // 当前认证问题
"lan": true,                      // LAN口双重安全认证是否开启
"wifi": true                      // wifi双重安全认证是否开启
}
</pre>
</li>
<li>
<p>api/auth/set_auth_question</p>

<p>post 需要登录验证：是</p>

<pre>
{
"custom": "这是一个自定义问题",   // 用户自定义问题
"question": "当前问题",           // 当前认证问题
"answer": "当前答案",             // 当前问题答案
"lan": true,                      // LAN口双重安全认证是否开启
"wifi": true                      // wifi双重安全认证是否开启
}
</pre>
</li>
</ul><h3>
<a name="%E9%98%B2%E8%B9%AD%E7%BD%91" class="anchor" href="#%E9%98%B2%E8%B9%AD%E7%BD%91"><span class="octicon octicon-link"></span></a>防蹭网</h3>

<ul>
<li><p>api/security/get_config
method: get
return 
{
“code”: 0,
“enabled”:true             (type: boolean)        // 防蹭网是否开启
}</p></li>
<li><p>api/security/set_config
method: post
post data
{
“enabled”: true            (type:boolean)   // 是否开启防蹭网
}</p></li>
</ul><p>post 需要登录验证：否</p>

<ul>
<li>api/security/request_permission         // 请求上网权限
method: post
post data:
{
“username”: “aaa”    (type:string)    // 用户名字
}
post 需要登录验证：否</li>
<li>api/security/check_permission      // 检查上网权限
method: get</li>
</ul><p>return : 
{
  “code”: 0,                  （type:number）         // 0 -&gt; 允许上网，1-&gt;不允许上网,2-&gt;等待主人处理 -1 -&gt;系统内部错误
}</p>

<h3>
<a name="wan" class="anchor" href="#wan"><span class="octicon octicon-link"></span></a>wan</h3>

<ul>
<li>
<p>api/wan/get_info  (获取当前wan设置)</p>

<p>get 需要登录验证：是</p>

<pre>
{
"type":"STATIC", // 当前连接方式( DHCP, PPPOE, STATIC, wireless-repeater)
"ip":"192.168.1.12",
"mask":"182.168.1.1",
"gateway":"255.255.255.0",
"dns1":"8.8.8.8",
"dns2":"8.8.4.4",
"mtu":2,
"stp": true,
"account":"account",    // 如果当前是PPPOE
"password":"password",   // 如果当前是PPPOE
"macCloneEnabled":true, //是否开启Macclone
"macCloneMac":"40:6c:8f:2d:6c:3b" ,//MAC CLONE mac
"uptime":"22486" 路由器运行时间
}
</pre>
</li>
<li><p>/api/wan/clientmacaddr
获取client macaddr,专门给mac clone feature 使用 
{"macaddr":"40:6C:8F:2D:6C:3A"}</p></li>
<li>
<p>api/wan/get_info/dhcp  (获取dhcp设置)</p>

<p>get 需要登录验证：是</p>

<pre>
{
"dns1":"8.8.8.8",
"dns2":"8.8.4.4",
"mtu":2,
"stp": true
}
</pre>
</li>
<li>
<p>api/wan/get_info/pppoe  (获取pppoe设置)</p>

<p>get 需要登录验证：是</p>

<pre>
{
"account":"account",  
"password":"password",
"pppoe_method": "KeepAlive" // 连接模式(KeepAlive, OnDemand, Manual)
"pedial_period": 60         // 连接断开xx秒后尝试重拨,单位(秒) 当前KeepAlive
"idle_time": 5              // 无流量时xx分钟后断开,单位(分) 当前OnDemand
"status": -1/0/1/2/3/4/5/6/7// -1: PPPoE暂时无状态；
                            // 0: 连接已成功；
                            // 1: 用户名／密码错误；
                            // 2: 连接已断开; 
                            // 3: 不允许本帐户在此时间登录; 
                            // 4: 帐户已禁用;
                            // 5: 密码已过期;
                            // 6: 帐户没有远程访问权限;
                            // 7: 未知错误.
}
</pre>
</li>
<li>
<p>api/wan/get_info/static  (获取static设置)</p>

<p>get 需要登录验证：是</p>

<pre>
{
"ip":"192.168.1.12",
"mask":"182.168.1.1",
"gateway":"255.255.255.0",
"dns1":"8.8.8.8",
"dns2":"8.8.4.4",
"mtu":2,
"stp": true
}
</pre>
</li>
<li>
<p>api/wan/set_config  (设置wan口)</p>

<p>post 需要登录验证：是</p>

<pre>
{
"type":"STATIC", // 当前连接方式( DHCP, PPPOE, STATIC, wireless-repeater)
"ip":"192.168.1.12",
"mask":"255.255.255.0",
"gateway":"192.168.1.1",
"dns1":"8.8.8.8",
"dns2":"8.8.4.4",
"mtu":2,
"stp": true,
"account":"account",    // 如果当前是PPPOE
"password":"password"   // 如果当前是PPPOE
"pppoe_method": "KeepAlive" // 连接模式(KeepAlive, OnDemand, Manual)
"pedial_period": 60         // 连接断开xx秒后尝试重拨,单位(秒) 当前KeepAlive
"idle_time": 5              // 无流量时xx分钟后断开,单位(分) 当前OnDemand
"macCloneEnabled":true, //是否开启Macclone
"macCloneMac":"40:6c:8f:2d:6c:3b" //MAC CLONE mac
}
return
{
“code”: 0,          // (0-&gt;设置成功，1-&gt; 正在设置，-1 -&gt;已有全局设置锁)
“msg”: “xx”
}
</pre>
</li>
<li>
<p>api/wan/is_internet_available</p>

<p>get : 需要登录验证：是
</p>
<pre>
{
"code":0                // 取得外网是否正常可用(0-&gt;网通， 1-&gt;（不通）不能解析域名，２-&gt;（不通）不能到达网关， -1-&gt;等待)</pre>
</li>
</ul><p>}
</p>

<ul>
<li>
<p>api/wan/get_traffics</p>

<p>get : 需要登录验证：是
</p>
<pre>
{
"up":number,               // 取得自系统启动以来，上行数据的总量(单位字节）
"up_str":"number",             // up 值的字符串形式 例如: "12345678"
"down":number              // 取得自系统启动依赖，下行数据的总量（单位字节）
"down_str":"number"              //  down 值的字符串形式 例如: "12345678"
"code":0, 成功
"tx_rate":0, 发丢包率
"rx_dropped":0, 收丢包</pre>
</li>
</ul><p>"rx_packets":270649, 收包
"tx_packets":282499, 发包
"rx_rate":0, 收丢包率
"tx_dropped":0 发丢包</p>

<p></p>

<h3>
<a name="wifi" class="anchor" href="#wifi"><span class="octicon octicon-link"></span></a>wifi</h3>

<ul>
<li>
<p>api/wifi/get_config 取得当前wifi的配置信息</p>

<p>get 需要登录验证:是</p>

<pre>
{
"2g": {
  "enabled":true,                                     // 2.4g开关    RadioOff
  "ssid": "ssid1",                                    // 名称 SSID1(长度1-32字符)
  “broadcastssid”:true,                                    // 是否广播SSID
  "security_mode": "WPAPSKWPA2PSK"      // Security Mode
   "encrypt": "TKIP",                          // WPA Algorithms(TKIP,AES ,TKIPAES)  EncrypType
  "password": "123456kskdajksdasdasdasdasdasdasda",   // 密码   AuthMode（长度8-64字符）
  "power": 20,                                        // 无线信号功率   TXPower
  "channel": 6,                                       // 信道                         Channel
  "net_type": 9,       (0,1,4,6,9,)                          // 网络模式              WirelessMode
  "band_width_mode":1,           (0|1)// 频道带宽         HT_BW
  "mac":"28-2c-b2-97-82-39",                          // mac地址        命令行ifconfig
  "beacon": 40,                    (20~1024)                    // Beacon时槽       BeaconPeriod
  "apsd_enabled": true,                                       // APSD开关         APSDCapable
  "ap_enabled":true,                                          // AP隔离开关         NoForwarding
  "shortgi_enabled": true,                                    // short GI开关    HT_GI
  "wmm_enabled": true                                         // 多媒体优先WMM开关            WmmCapable
},
"5g": {
  "enabled":true,                                     // 5g开关
  "ssid": "ssid1",                                    // 名称
  “broadcastssid”:true,                                    // 是否广播SSID
  "security_mode": "WPAPSKWPA2PSK"                    // Security Mode
   "encrypt": "TKIP",                                 // WPA Algorithms(TKIP,AES ,TKIPAES)                    EncrypType
  "password": "123456kskdajksdasdasdasdasdasdasda",   // 密码
  "power": 20,                                        // 无线信号功率
  "channel": 14,                                      // 信道
  "net_type": 14           (2,8,14,15)                     // 网络模式
  "band_width_mode":1       (0|1)            // 频道带宽
  "mac":"28-2c-b2-97-82-39",                          // mac地址
  "beacon": 40,                                       // Beacon时槽
  "apsd_enabled": true,                                       // APSD开关
  "ap_enabled":true,                                          // AP隔离开关
  "shortgi_enabled": true,                                    // short GI开关
  "wmm_enabled": true                                         // 多媒体优先WMM开关
  “same_as_2g”: true                                       // 使用与2.4g相同的设置（包含：无线名称，加密方式，加密算法，密码，传输功率，Beacon时槽，APSD，AP隔离，Short GI，多媒体优先WMM，无线广播）
}
}
</pre>
</li>
<li>
<p>api/wifi/set_config                    // 设置wifi 非阻塞</p>

<p>post 需要登录验证：否</p>

<pre>
{
"2g": {
  "enabled":true,                    (true|false)          // 2.4g开关
  "ssid": "ssid1",                    (any string)        // 名称(长度1-32字符)
  “broadcastssid”:true,                                    // 是否广播SSID
  "security_mode": "Disable" (Disable,WPAPSK,WPA2PSK,WPAPSKWPA2PSK) //Security Mode
   "encrypt": "TKIP",   (NONEDisable,   TKIPWPA(2)PSK,    AESWPA(2)PSK ,   TKIPAESWPA(2)PSK  )  // WPA Algorithms EncrypType
  "password": "123456kskdajksdasdasdasdasdasdasda",  (any string)   // 密码(长度8-64字符)
  "power": 20,           (100,90,60,30,15,0)            // 无线信号功率
"channel": 0,           (0)            // 哪个信道
  //
            {'name': '自动选择', 'value': 0},
{'name': '2412MHz (Channel 1)', 'value': 1},
{'name': '2417MHz (Channel 2)', 'value': 2},
{'name': '2422MHz (Channel 3)', 'value': 3},
{'name': '2427MHz (Channel 4)', 'value': 4},
{'name': '2432MHz (Channel 5)', 'value': 5},
{'name': '2437MHz (Channel 6)', 'value': 6},
{'name': '2442MHz (Channel 7)', 'value': 7},
{'name': '2447MHz (Channel 8)', 'value': 8},
{'name': '2452MHz (Channel 9)', 'value': 9},
{'name': '2457MHz (Channel 10)', 'value': 10},
{'name': '2462MHz (Channel 11)', 'value': 11},
{'name': '2467MHz (Channel 12)', 'value': 12},
{'name': '2472MHz (Channel 13)', 'value': 13}

"net_type": 9,        (0,1,4,6,9,)                     // 网络模式
2G: 9
0: legacy 11b/g mixed
1: legacy 11B only
4: legacy 11G only
6: 11N only
9: 11BGN mixed

"band_width_mode":1,      (0|1|2)                 // 频道带宽(20Mhz-&gt;0, 20Mhz/40Mhz-&gt;1,强制40Mhz-&gt;2)
"beacon": 40,                       (20~1024)        // Beacon时槽
"apsd_enabled": true,                         (true|flase)      // APSD开关
"ap_enabled":true,                              (true|flase)     // AP隔离开关
"shortgi_enabled": true,                       (true|flase)      // short GI开关
"wmm_enabled": true                          (true|flase)        // 多媒体优先WMM开关
},
"5g": {
  "enabled":true,                              // 5g开关
  "ssid": "ssid1",                              // 名称(长度1-32字符)
  “broadcastssid”:true,                    // 是否广播SSID
  "security_mode": "Disable"    // Security Mode(Disable,WPAPSK,WPA2PSK,WPAPSKWPA2PSK)
   "encrypt": "TKIP",    (NONEDisable,   TKIPWPA(2)PSK,    AESWPA(2)PSK ,   TKIPAESWPA(2)PSK  )   // WPA Algorithms(TKIP,AES ,TKIPAES)
  "password": "123456kskdajksdasdasdasdasdasdasda",    // 密码(长度8-64字符)
  "power": 20,      (100,90,60,30,15,0)        // 无线信号功率
  "channel": 0,                          // 哪个信道
//
    {'name': '自动选择', 'value': 0},
  {'name': '5180MHz (Channel 36)', 'value': 36},
  {'name': '5200MHz (Channel 40)', 'value': 40},
  {'name': '5220MHz (Channel 44)', 'value': 44},
  {'name': '5240MHz (Channel 48)', 'value': 48},
  {'name': '5260MHz (Channel 52)', 'value': 52},
  {'name': '5280MHz (Channel 56)', 'value': 56},
  {'name': '5300MHz (Channel 60)', 'value': 60},
  {'name': '5320MHz (Channel 64)', 'value': 64},
  {'name': '5745MHz (Channel 149)', 'value': 149},
  {'name': '5765MHz (Channel 153)', 'value': 153},
  {'name': '5785MHz (Channel 157)', 'value': 157},
  {'name': '5805MHz (Channel 161)', 'value': 161},
  {'name': '5825MHz (Channel 165)', 'value': 165}

  "net_type": 14,                (2,8,14,15)         // 网络模式
5G 14
2: legacy 11A only
8: 11AN mixed
14: 11A/AN/AC mixed 5G band only
15: 11 AN/AC mixed 5G band only

"band_width_mode":1       (0|1) ,                   // 频道带宽
"beacon": 40,                               // Beacon时槽
"apsd_enabled": true,                               // APSD开关
"ap_enabled":true,                                  // AP隔离开关
"shortgi_enabled": true,                            // short GI开关
"wmm_enabled": true                                 // 多媒体优先WMM开关
“same_as_2g”: true                                       // 使用与2.4g相同的设置（包含：无线名称，加密方式，加密算法，密码，传输功率，Beacon时槽，APSD，AP隔离，Short GI，多媒体优先WMM，无线广播）
}
}
</pre>
</li>
<li><p>api/wifi/check_set
gett  需要登录验证：是
return
{
“code”: 0,          // (0-&gt;设置成功，1-&gt; 正在设置，-1 -&gt;已有全局设置锁)
“msg”: “xx”
}</p></li>
<li>
<p>api/wifi/is_enabled</p>

<p>get  需要登录验证：是</p>

<pre>
{
"is_enabled":bool,              // 是否已经打开了wifi
}
</pre>
</li>
<li>
<p>api/wifi/ssid_get_config  (TODO)</p>

<p>get 需要登录验证：是
return </p>

<pre>
[
{
  "enable": true,                                       // 是否启用
  "name": "ssid1",                                      // 名称
  "encrypt": "WAP/WAP2",                               // 无线加密方式
  "password": "123456kskdajksdasdasdasdasdasdasda",    // 密码
  "rate": "5G",                                        // 无线频段
  "double_security": true                              // 是否开启双重安全认证
},
{
  "enable": false,
  "name": "ssid2idsijdoajosjdaojsijdao",
  "encrypt": "不加密",
  "password": "",
  "rate": "2.4G",
  "double_security": false
}
]
</pre>
</li>
<li>
<p>api/wifi/ssid_set_config   (TODO)</p>

<p>post 需要登录验证：是</p>

<pre>
[
{
  "enable": true,                                       // 是否启用
  "name": "ssid1",                                      // 名称
  "encrypt": "WAP/WAP2",                               // 无线加密方式
  "password": "123456kskdajksdasdasdasdasdasdasda",    // 密码
  "rate": "5G",                                        // 无线频段
  "double_security": true                              // 是否开启双重安全认证
},
{
  "enable": false,
  "name": "ssid2idsijdoajosjdaojsijdao",
  "encrypt": "不加密",
  "password": "",
  "rate": "2.4G",
  "double_security": false
}
]
</pre>
</li>
</ul><h3>
<a name="lan%E5%8F%A3" class="anchor" href="#lan%E5%8F%A3"><span class="octicon octicon-link"></span></a>lan口</h3>

<ul>
<li>
<p>api/lan/get_lan_config</p>

<p>get 需要登录验证：是</p>

<pre>
{
"ip": "192.168.1.2",                        // ip
"net_mask": "255.255.255.0",                // 子网掩码
"dhcp_enabled": true,                       // dhcp开关
"ipaddr_start": "4.4.4.4",                  // IP地址开始段
"ipaddr_end": "4.4.4.4",                    // IP地址结束段
"gateway": "192.168.1.0",                   // 网关
"dhcp_net_mask": "255.255.255.0",           // dhcp子网掩码
"dns1Method": "手动",                       // dns1设置方式（手动，自动）
"dns2Method": "自动",                        // dns2设置方式（手动，自动）
"dns1": "8.8.8.8",                          // 首选dns
"dns2": "",                                 // 备用dns
"time": 381,                                // 地址租期
"mac":"28-2c-b2-97-82-39"                   // mac地址
}
</pre>
</li>
<li>
<p>api/lan/set_lan_config</p>

<p>post 需要登录验证：是</p>

<pre>
{
"ip": "192.168.1.2",                        // ip
"net_mask": "255.255.255.0",                // 子网掩码
"dhcp_enabled": true,                       // dhcp开关
"ipaddr_start": "4.4.4.4",                  // IP地址开始段
"ipaddr_end": "4.4.4.4",                    // IP地址结束段
"gateway": "192.168.1.0",                   // 网关
"dhcp_net_mask": "255.255.255.0",           // dhcp子网掩码
"dns1Method": "手动",                       // dns1设置方式（手动，自动）
"dns2Method": "自动",                       // dns2设置方式（手动，自动）
"dns1": "8.8.8.8",                          // 首选dns
"dns2": "",                                 // 备用dns
"time": 381,                                // 地址租期
"mac":"28-2c-b2-97-82-39"                   // mac地址
}
</pre>
</li>
<li><p>api/lan/check_set
gett  需要登录验证：是
return
{
“code”: 0,          // (0-&gt;设置成功，1-&gt; 正在设置，2-&gt; 设置失败)
“msg”: “xx”
}</p></li>
<li>
<p>api/system/get_cable_connection</p>

<p>get 需要登录验证:是</p>

<pre>
{
"wan":true   // wan口是否有物理连接
"lan1":true   // wan口是否有物理连接
“lan2":true   // wan口是否有物理连接
“usb”:true   // usb是否有连接
}
</pre>
</li>
</ul><p>*api/system/get_time<br>
get 需要登录验证:是</p>

<p>return json 
{
  “time”: 2361632818231,       //路由器时间（单位秒）
  “time_type”: 0|1   (type:number)                 //时间格式，0-&gt;12小时制式,1-&gt;24小时制式
}</p>

<p>*api/system/set_time
post  需要登录验证:是</p>

<p>post data:
{
 “time_type”: 0|1   (type:number)                 //时间格式，0-&gt;12小时制式,1-&gt;24小时制式
}</p>

<h3>
<a name="devices-manager" class="anchor" href="#devices-manager"><span class="octicon octicon-link"></span></a>devices manager</h3>

<ul>
<li>
<p>api/devices/disk(硬盘设备信息)</p>

<p>get</p>
</li>
</ul><p>return:</p>

<pre>
{
  "totalSize": 1,             // 总大小(KB)
  "left": 0.23,               // 剩余空间(KB)
  "name": "disk1",            // 硬盘的名字
  "time": 5677                // 连接时间
}
</pre>

<ul>
<li>api/devices/disk_uninstall(卸载硬盘)</li>
</ul><p>get</p>

<p>return</p>

<pre>
{
  "code": 0,
  "msg": ""
}
</pre>
  

<ul>
<li><p>api/devices/ddr2_flash                   // 内存 DDR2,闪存 NAND FLASH信息
method:get
return:
{
"ddr2_total_size": 64,            //ddr2总大小（KB）
"ddr2_remain": 28,              // ddr2剩余（KB）
"flash_total_size": 64,                           // flash总大小（KB）
"flash_remain": 28,                             // flash剩余（KB）
}</p></li>
<li>
<p>api/devices/cables(获取有线设备列表)</p>

<p>get</p>

<p>return</p>

<pre>
{
  "code": 0,
  "devices": [
      {
          "platform": "phone",                    // 设备类型(phone, pad, unknow)
          "total_speed": 200,                     // 总速率
          "down_speed": 100,                      // 下载速度
          "up_speed": 100,                        // 上传速度
          "host_name": "android-a078b707872bc9a", // 主机名
          "connectType": "WIFI5G",                // 连接类型c
          "up": "10MB",                           // 总上传
          "down": "10GB",                         // 总下载
          "type": 1,                         // 设备连接方式(1-&gt;cable, 2-&gt;wifi2.4g,3-&gt;wifi5g)
          "ip": "192.168.1.11",                   // ip地址
          "mac": "97:32:21:44:55:11:42",          // mac地址
          "leftTime": 31223,                      // 租约剩余时间单位(s)
          "time": 31223,                          // 连接时间单位(s)
          "tag": "white"                          // 白名单，黑名单，或没有(white, black, "")
          "up_limit": 400,                        // 上传限速
          "down_limit": 600                       // 下载限速
  “local”,0 or 1 // web使用,是否是当前主机
      },...  
  ]
}
</pre>
</li>
<li>
<p>api/devices/wifis(获取无线设备列表)</p>

<p>get</p>

<p>return
</p>
<pre>
{
  "code": 0,
  "devices": [
      {
          "platform": "phone",                    // 设备类型(phone, pad, unknow)
          "total_speed": 200,                     // 总速率
          "down_speed": 100,                      // 下载速度
          "up_speed": 100,                        // 上传速度
          "host_name": "android-a078b707872bc9a", // 主机名
          "connectType": "WIFI5G",                // 连接类型
          "up": "10MB",                           // 总上传
          "down": "10GB",                         // 总下载
          "type": 1,                         // 设备连接方式(1-&gt;cable, 2-&gt;wifi2.4g,3-&gt;wifi5g)
          "ip": "192.168.1.11",                   // ip地址
          "mac": "97:32:21:44:55:11:42",          // mac地址
          "leftTime": 31223,                      // 租约剩余时间单位(s)
          "time": 31223,                          // 连接时间单位(s)
          "tag": "white"                          // 白名单，黑名单，或没有(white, black, "")
          "up_limit": 400,                        // 上传限速
          "down_limit": 600                       // 下载限速
  “single”： 100                            // 信号强度
“local”,0 or 1 // web使用,是否是当前主机
“rssi0”,-30 //信号强度
“rssi1”,0 //信号强度</pre>
</li>
</ul><p>“rssi2”,-50//信号强度</p>

<pre><code>    },...
]
</code></pre>

<p>}
  </p>

<ul>
<li>
<p>api/devices/edit_hostname (修改设备主机名)</p>

<p>post</p>

<pre>
{
  "mac": "97:32:21:44:55:11:42",
  "host_name": "android-a078b"
}
</pre>
</li>
</ul><p>*/api/devices/blacklist (黑名单列表)
{"devices":[{
            "platform": "phone",                    // 设备类型(phone, pad, unknow)
            "host_name": "android-a078b707872bc9a", // 主机名
            "type": 1,                         // 设备连接方式(1-&gt;cable, 2-&gt;wifi2.4g,3-&gt;wifi5g)
            "mac": "97:32:21:44:55:11:42",          // mac地址</p>

<p>},...],"code":0}</p>

<p>*/api/devices/whitelist (白名单列表)
{"devices":[{
            "platform": "phone",                    // 设备类型(phone, pad, unknow)
            "host_name": "android-a078b707872bc9a", // 主机名
            "type": 1,                         // 设备连接方式(1-&gt;cable, 2-&gt;wifi2.4g,3-&gt;wifi5g)
            "mac": "97:32:21:44:55:11:42",          // mac地址</p>

<p>},...],"code":0}
*/api/devices/graylist (灰名单，请求列表)
{"devices":[{
            "mac”: "AA:BB:CC:DD:EE:FF",                    // 请求设备的MAC地址
            "ip": "192.168.10.100",                                  // IP地址
            "username": "张三丰",                             // 用户名</p>

<p>},...],"code":0}</p>

<ul>
<li>
<p>api/devices/blacklist_add (加到黑名单)</p>

<p>post</p>

<pre>
{
  "mac": "32:21:44:55:11:42"
}
</pre>
</li>
<li>
<p>api/devices/blacklist_remove (从黑名单移除)</p>

<p>post</p>

<pre>
{
  "mac": "32:21:44:55:11:42"
}
</pre>
</li>
<li>
<p>api/devices/whitelist_add (加到白名单)</p>

<p>post</p>

<pre>
{
  "mac": "32:21:44:55:11:42"
}
</pre>
</li>
<li>
<p>api/devices/whitelist_remove (从白名单移除)</p>

<p>post</p>

<pre>
{
  "mac": "32:21:44:55:11:42"
}
</pre>
</li>
<li>
<p>api/devices/apply_rule (应用防火墙规则)</p>

<p>post</p>

<pre>
{
  "mac": "32:21:44:55:11:42"
}
</pre>
</li>
<li><p>api/devices/up_limit(上传限速)
post
{
“mac”:”xxx”,            // mac地址
“up_limit”:100          // (type:number),0表示不限速，单位：kbps
}</p></li>
<li><p>api/devices/down_limit(下载限速)
post
{
“mac”:”xxx”,            // mac地址
“down_limit”:100          // (type:number),0表示不限速，单位：kbps
}</p></li>
</ul><p>专家模式相关接口</p>

<p>/api/system/get_expertMode
需要验证 ：yes
方法        ：get
return </p>

<pre>
  {
    "enabled": true/false
  }
  </pre>

<p>/api/system/set_expertMode
需要验证 ：yes
方法        ：post
post data：</p>

<pre>
  {
    "enabled": true/false
  }
  </pre>

<p>return data：</p>

<pre>
  {
    “code”: 0,
“msg”: “error message when failed” (optional, when error happens)
“password”: “XXXXXXX”    (optional, when expert mode is enabled)
  }
  </pre>

<p>TP APP API only：</p>

<p>sys_api.set_password
 {
    “password”: “XXXXXXX”
 }
return:
 {
    “password”: “XXXXXXX”
 }</p>

<p>游戏加速的相关接口</p>

<p>/api/system/gameAcc/start
需要验证 ：yes
方法        ：get
/api/system/gameAcc/stop
需要验证 ：yes
方法        ：get</p>

<p>/api/system/gameAcc/restart
需要验证 ：yes
方法        ：get</p>

<p>/api/system/gameAcc/getCurrentGameName
需要验证 ：yes
方法        ：get
return</p>

<pre>
  {
    “code”: 0,
    “game_name" : “极品飞车”
  }
  </pre>

<p>/api/system/gameAcc/getPacketNum
需要验证 ：yes
方法        ：get
return</p>

<pre>
  {
    “code”: 0,
    “packet_number" : 1326091
  }
  </pre>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/mochui/modouwifi-api/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/mochui/modouwifi-api/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/mochui/modouwifi-api"></a> is maintained by <a href="https://github.com/mochui">mochui</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>